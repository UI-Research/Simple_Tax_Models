# FC = the compiler to use
FC=gfortran

# Compiler options
FFLAGS=-g -ffree-line-length-none
#-fcheck=all -Wall

# List libraries used by the program here
LIBS=


# Suffix-rules:  Begin by throwing away all old suffix-
# rules, and then create new ones for compiling
# *.f90-files.
.SUFFIXES:
.SUFFIXES: .f90 .o


.f90.o:
	$(FC) -c $(FFLAGS) $<

# Script to generate the dependencies
# for this example, handling order by hand, since it is small, but for larger
# projects, a tool like fort_depend is useful.
#MAKEDEPEND=fort_depend.py

# $(DEP_FILE) is a .depend file generated by fort_depend.py
#DEP_FILE = .depend
OBJECTS = declarations.f90 ParamOptions.f90 TaxFiler.f90 ModelTax.f90

#############
# Make sure everything depends on the .dep file
#all: $(actual_executable) $(DEP_FILE)
FOBJ=declarations.o ParamOptions.o TaxFiler.o ModelTax.o

fortmodel: $(FOBJ)
	$(FC) -o $@ $(FFLAGS) $(LDFLAGS) $(FOBJ) $(LIBS)

# Make dependencies
#.PHONY: depend
#depend: $(DEP_FILE)

# The .dep file depends on the source files, so it automatically gets updated
# when you change your source
#$(DEP_FILE): $(OBJECTS)
#	@echo "Making dependencies!"
#	python $(MAKEDEPEND) -w -o $(DEP_FILE) -f $(OBJECTS)

#include $(DEP_FILE)


# Include the dependency-list
#include .depend

# target 'clean' for deleting object- *.mod- and other
# unwanted files
clean:
	rm -f *.o *.mod fortmodel
